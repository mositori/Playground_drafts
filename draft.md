# 要旨
8/29 IBM主催のHyperledger Fabric勉強会に参加してきました。そして学んだ事をこの記事でアウトプットしたいと思います。
特に今回はコンソーシアム型のブロックチェーンについて学びましたので、前提としてブロックチェーンの大枠を示した後に、今回のテーマについて示していきたいと思います。

(初学者なので、間違っていることがあれば随時指摘お願いします.)


# そもそもブロックチェーンって
## 原理
ブロックチェーンとは、データを納めたブロックが時系列でつながったデータベースです。各ブロックにその一個前のブロックのハッシュ値を含めることで、チェーンを構成しています。

![Blockchain](https://github.com/mositori/Playground_drafts/blob/master/blockchain.jpg?raw=true "Blockchain")

ブロックチェーンの大きな特徴は、

1. 耐改竄性に優れている点
2. P2Pによる非中央集権的システム

だと私は思っています。上記の2つの特徴がどのようにして生まれているのかについて示します。

### 耐改竄性
耐改竄性はハッシュ関数とその特徴を用いることで生まれます。

このハッシュ値はハッシュ関数の出力の値で、このハッシュ関数には以下の2つの特徴があります。

1. 入力が少しでも変わると、出力が全く異なる
2. 出力(ハッシュ値)から入力を求めることは、極めて難しい

![Hashing](https://github.com/mositori/Playground_drafts/blob/master/hash.png?raw=true "Hashing")

つまり、過去のブロックを改竄しようとする時に、その改竄ブロックのハッシュ値が次のハッシュ値と同じでなければなりません。これは相当難しく、また複数の参加者がいる場合、各ノードに改竄ブロックを合意してもらうことも困難であることが予想できます。よって耐改竄性があると言えます。

### 非中央集権的システム
非中央集権的システムとは図のBのような繋がりのことを指します。中央にサーバーを構えなくても、各参加者が互いにデータを流し合うことで動きます。

![Hashing](https://github.com/mositori/Playground_drafts/blob/master/decentralization.png?raw=true "Hashing")

ブロックチェーンにおいては、各ノードが分散台帳(過去のブロック等 or ステートDB)をローカルに保存し、マイナーが新しいブロックを生成し伝搬させることでチェーンを構成していきます。これによって中央サーバーが死ぬと止まる中央集権的システムにおけるデメリットをカバーしています。


## パブリックとコンソーシアム
ここまで、簡略にブロックチェーンについて述べてきましたが、次はよりビジネスに近い応用について示します。

ブロックチェーンには2つのタイプに分けることができ、パブリック型とコンソーシアム型である。それぞれの特徴を以下の表にまとめました。

|   	|   パブリック型	|  コンソーシアム型 	|
|:-:	|:-:	|:-:	|
|  例 	|   BTC,ETH	|  Hyperledger Fabric, R3 Corda 	|
|  参加者 	|   不特定	|  ** 特定 ** 	|
| 非集中性  	|  高い 	| やや低い  	|
|  コンセンサス方法 	|  PoW 	| 多数決(ビザンチン合意)  	|
|  ブロック生成速度 	|  遅い 	|  ** 速い(設定可能) ** 	|
|  ファイナリティ (ロールバック可能性) 	|  ない 	| ある  	|

パブリック型の代表例としてビットコインやイーサリアム等があります。これらは誰でも参加することが出来ますが、一方コンソーシアム型は、参加するのに許可が必要になります。

また、新しいブロックの生成に掛かる時間も設定することが可能です。(PoWでは決まった時間で更新するようなことは出来ない。ビットコインでは約10分程度)

ブロックチェーンの特徴と、参加に許可制を与えたりと制限を加えることでビジネス用途に利用することが出来ます。以下に実際に使用されているケースを載せます。各ケースの具体的な使用方法は各自で調べてみてください。


## コンソーシアム型ブロックチェーンのユースケース
### Everledger -ダイアモンドの管理台帳-
url:https://www.everledger.io/

### Supply Chain Food Safety -食べ物の生産地、食品工場の管理台帳-
url:https://www.ibm.com/blogs/blockchain/category/blockchain-in-food-safety/

### 国際貿易(Maersk)
url:http://newsroom.ibm.com/2018-08-09-Maersk-and-IBM-Introduce-TradeLens-Blockchain-Shipping-Solution

# おわりに
実際のブロックチェーンはもっと複雑なロジックで動いており、厳密性には欠ける内容でしたが、ビジネスにおいてどのように効果を発揮しているかを少しでも理解していただけたら幸いです。
